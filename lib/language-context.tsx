"use client"

import React, { createContext, useContext, useState, useEffect } from "react"

type Language = "en" | "ar"

interface LanguageContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined)

// Translation keys
const translations: Record<Language, Record<string, string>> = {
  en: {
    // Navigation
    "nav.dashboard": "Dashboard",
    "nav.chartOfAccounts": "Chart of Accounts",
    "nav.journalEntries": "Journal Entries",
    "nav.projects": "Projects",
    "nav.purchaseOrders": "Purchase Orders",
    "nav.generalLedger": "General Ledger",
    "nav.trialBalance": "Trial Balance",
    "nav.financialReports": "Financial Reports",
    "nav.accountReports": "Account Reports",
    "nav.users": "Users",
    "nav.logout": "Logout",
    
    // Common
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.view": "View",
    "common.create": "Create",
    "common.update": "Update",
    "common.search": "Search",
    "common.loading": "Loading...",
    "common.close": "Close",
    "common.submit": "Submit",
    "common.actions": "Actions",
    "common.status": "Status",
    "common.date": "Date",
    "common.amount": "Amount",
    "common.description": "Description",
    "common.name": "Name",
    "common.email": "Email",
    "common.role": "Role",
    "common.createdBy": "Created By",
    "common.createdAt": "Created At",
    
    // Purchase Orders
    "po.title": "Purchase Orders",
    "po.manage": "Manage purchase orders and approvals",
    "po.new": "New Purchase Order",
    "po.create": "Create New Purchase Order",
    "po.edit": "Edit Purchase Order",
    "po.update": "Update Purchase Order",
    "po.number": "PO Number",
    "po.amount": "Amount",
    "po.description": "Description",
    "po.uploadImage": "Upload Image",
    "po.status": "Status",
    "po.pending": "Pending",
    "po.firstApproved": "First Approved",
    "po.approved": "Approved",
    "po.rejected": "Rejected",
    "po.approve": "Approve",
    "po.reject": "Reject",
    "po.rejectionReason": "Rejection Reason",
    "po.rejectTitle": "Reject Purchase Order",
    "po.rejectDescription": "Please provide a reason for rejecting this purchase order.",
    "po.adminApprove": "Admin Approve",
    "po.accountantApprove": "Accountant Approve",
    "po.firstApprovedBy": "First Approved By",
    "po.secondApprovedBy": "Second Approved By",
    "po.rejectedBy": "Rejected By",
    "po.viewDetails": "View Purchase Order Details",
    "po.allOrders": "All Purchase Orders",
    "po.noOrders": "No purchase orders found. Click \"New Purchase Order\" to create one.",
    
    // Journal Entries
    "je.title": "Journal Entries",
    "je.create": "Create Entry",
    "je.view": "View Entries",
    "je.createNew": "Create Journal Entry",
    "je.edit": "Edit Journal Entry",
    "je.entryNumber": "Entry #",
    "je.accountName": "Account Name",
    "je.project": "Project",
    "je.createdBy": "Created By",
    "je.lines": "Lines",
    "je.balanced": "Balanced",
    "je.notBalanced": "Not Balanced",
    
    // Chart of Accounts
    "coa.title": "Chart of Accounts",
    "coa.addAccount": "Add Account",
    "coa.addSubAccount": "Add Sub-Account",
    "coa.editAccount": "Edit Account",
    "coa.accountCode": "Account Code",
    "coa.accountName": "Account Name",
    "coa.accountType": "Account Type",
    "coa.parentAccount": "Parent Account",
    "coa.cashFlowCategory": "Cash Flow Category",
    "coa.accountTypes": "Account Types",
    "coa.autoGenerated": "(Auto-generated)",
    "coa.selectType": "Select type",
    "coa.selectParent": "Select parent account",
    "coa.isHeaderAccount": "Is Header Account",
    "coa.updateAccountInfo": "Update the account information below.",
    "coa.createSubAccount": "Create a new sub-account under the selected parent account.",
    "coa.createNewAccount": "Create a new account in your chart of accounts.",
    "coa.accountCodesAuto": "Account codes are automatically generated based on account type and hierarchy",
    "coa.placeholderCash": "e.g., Cash",
    "coa.noParent": "No Parent",
    "coa.operating": "Operating",
    "coa.investing": "Investing",
    "coa.financing": "Financing",
    "coa.none": "None",
    "coa.cannotDelete": "Cannot Delete Account",
    "coa.hasTransactions": "This account has transactions and cannot be deleted.",
    "coa.deleteConfirm": "Are you sure you want to delete this account?",
    "coa.invalidAccountType": "Invalid Account Type",
    "coa.selectAccountType": "Please select an account type.",
    
    // General
    "general.success": "Success",
    "general.error": "Error",
    "general.confirm": "Are you sure?",
    "general.yes": "Yes",
    "general.no": "No",
    "general.unknown": "Unknown",
    "general.noDescription": "No description",
    "general.select": "Select",
    "general.none": "None",
    "general.all": "All",
    "general.filter": "Filter",
    "general.clear": "Clear",
    "general.apply": "Apply",
    "general.reset": "Reset",
    "general.export": "Export",
    "general.print": "Print",
    "general.download": "Download",
    "general.upload": "Upload",
    "general.remove": "Remove",
    "general.add": "Add",
    "general.back": "Back",
    "general.next": "Next",
    "general.previous": "Previous",
    "general.finish": "Finish",
    "general.start": "Start",
    "general.end": "End",
    "general.from": "From",
    "general.to": "To",
    "general.asOf": "As of",
    "general.total": "Total",
    "general.subtotal": "Subtotal",
    "general.balance": "Balance",
    "general.debit": "Debit",
    "general.credit": "Credit",
    "general.required": "Required",
    "general.optional": "Optional",
    
    // Dashboard
    "dashboard.title": "Dashboard",
    "dashboard.overview": "Financial Overview",
    "dashboard.totalAssets": "Total Assets",
    "dashboard.totalLiabilities": "Total Liabilities",
    "dashboard.totalEquity": "Total Equity",
    "dashboard.netIncome": "Net Income",
    "dashboard.revenue": "Revenue",
    "dashboard.expenses": "Expenses",
    "dashboard.accountBreakdown": "Account Breakdown",
    "dashboard.byType": "By Account Type",
    
    // Chart of Accounts
    "coa.manage": "Manage your chart of accounts",
    "coa.code": "Code",
    "coa.description": "Description",
    "coa.isHeader": "Is Header Account",
    "coa.parent": "Parent Account",
    "coa.save": "Save Account",
    "coa.deleteConfirm": "Are you sure you want to delete this account?",
    "coa.noAccounts": "No accounts found",
    "coa.loading": "Loading accounts...",
    
    // Journal Entries
    "je.manage": "Manage journal entries",
    "je.date": "Date",
    "je.reference": "Reference",
    "je.debit": "Debit",
    "je.credit": "Credit",
    "je.addLine": "Add Line",
    "je.removeLine": "Remove Line",
    "je.totalDebit": "Total Debit",
    "je.totalCredit": "Total Credit",
    "je.difference": "Difference",
    "je.save": "Save Entry",
    "je.cancel": "Cancel",
    "je.delete": "Delete Entry",
    "je.deleteConfirm": "Are you sure you want to delete this entry?",
    "je.reverseConfirm": "Are you sure you want to reverse this entry?",
    "je.noEntries": "No journal entries found",
    "je.loading": "Loading entries...",
    "je.showAll": "Show All",
    "je.filterByDate": "Filter by Date",
    "je.selectAccount": "Select Account",
    "je.selectProject": "Select Project",
    "je.enterAmount": "Enter Amount",
    "je.enterDescription": "Enter Description",
    "je.totalDebit": "Total Debits",
    "je.totalCredit": "Total Credits",
    "je.manage": "Manage and review all journal entries",
    "je.newEntry": "New Entry",
    "je.totalEntries": "Total Entries",
    "je.dataIntegrity": "Data Integrity",
    "je.missingLines": "Missing lines",
    "je.allEntriesCombined": "All entries combined",
    "je.startDate": "Start Date",
    "je.endDate": "End Date",
    "je.allTypes": "All Types",
    "je.allStatuses": "All Statuses",
    "je.missingLinesStatus": "Missing Lines",
    "je.searchEntries": "Search entries...",
    "je.applyFilters": "Apply Filters",
    "je.completeDetails": "Complete details of all journal entries with enhanced functionality",
    "je.noAccounts": "No accounts",
    "je.more": "more",
    "je.subAccountOf": "Sub-account of:",
    
    // General Ledger
    "gl.title": "General Ledger",
    "gl.manage": "View detailed transaction history for accounts",
    "gl.selectAccount": "Select Account",
    "gl.allAccounts": "All Accounts",
    "gl.dateRange": "Date Range",
    "gl.transactions": "Transactions",
    "gl.noTransactions": "No transactions found",
    "gl.loading": "Loading general ledger...",
    "gl.viewTransactionHistory": "View detailed transaction history for accounts",
    "gl.noAccountSelected": "No Account Selected",
    "gl.selectAccountToView": "Please select an account to view its general ledger",
    "gl.loadLedger": "Load Ledger",
    "gl.searchTransactions": "Search Transactions",
    "gl.entryDate": "Entry Date",
    "gl.entryNumber": "Entry Number",
    "gl.reference": "Reference",
    "gl.debit": "Debit",
    "gl.credit": "Credit",
    "gl.runningBalance": "Running Balance",
    "gl.exportCSV": "Export CSV",
    
    // Trial Balance
    "tb.title": "Trial Balance",
    "tb.manage": "View trial balance report",
    "tb.asOf": "As of Date",
    "tb.account": "Account",
    "tb.debitBalance": "Debit Balance",
    "tb.creditBalance": "Credit Balance",
    "tb.totalDebits": "Total Debits",
    "tb.totalCredits": "Total Credits",
    "tb.difference": "Difference",
    "tb.noData": "No data available",
    "tb.loading": "Loading trial balance...",
    "tb.viewReport": "View trial balance report",
    "tb.flatView": "Flat View",
    "tb.hierarchicalView": "Hierarchical View",
    "tb.expandAll": "Expand All",
    "tb.collapseAll": "Collapse All",
    "tb.exportCSV": "Export CSV",
    "tb.loadBalance": "Load Trial Balance",
    "tb.searchAccounts": "Search accounts...",
    "tb.allTypes": "All Types",
    "tb.summary": "Summary of all account balances to verify double-entry bookkeeping",
    "tb.applyDateFilter": "Apply Date Filter",
    "tb.searchByNameOrCode": "Search by Account Name or Code",
    "tb.filterByType": "Filter by Account Type",
    "tb.allAccountTypes": "All account types",
    "tb.showingAccounts": "Showing {{count}} of {{total}} accounts",
    "tb.type": "Type",
    "tb.search": "Search",
    "tb.debits": "Debits",
    "tb.credits": "Credits",
    "tb.totalWithChildren": "Total (w/ Children)",
    "tb.flatList": "Flat List",
    
    // Financial Reports
    "fr.title": "Financial Reports",
    "fr.manage": "Generate financial statements",
    "fr.balanceSheet": "Balance Sheet",
    "fr.incomeStatement": "Income Statement",
    "fr.cashFlow": "Cash Flow Statement",
    "fr.generate": "Generate Report",
    "fr.asOf": "As of Date",
    "fr.period": "Period",
    "fr.assets": "Assets",
    "fr.liabilities": "Liabilities",
    "fr.equity": "Equity",
    "fr.revenue": "Revenue",
    "fr.expenses": "Expenses",
    "fr.grossProfit": "Gross Profit",
    "fr.netProfit": "Net Profit",
    "fr.netIncome": "Net Income",
    "fr.operatingActivities": "Operating Activities",
    "fr.investingActivities": "Investing Activities",
    "fr.financingActivities": "Financing Activities",
    "fr.netCashFlow": "Net Cash Flow",
    "fr.loading": "Loading report...",
    "fr.noData": "No data available",
    "fr.generateStatements": "Generate financial statements",
    "fr.selectReport": "Select Report Type",
    "fr.asOfDateRequired": "As of date is required",
    "fr.loadingReport": "Loading report...",
    "fr.exportCSV": "Export CSV",
    "fr.print": "Print",
    "fr.totalAssets": "Total Assets",
    "fr.totalLiabilities": "Total Liabilities",
    "fr.totalEquity": "Total Equity",
    "fr.totalRevenue": "Total Revenue",
    "fr.totalExpenses": "Total Expenses",
    "fr.netCashFromOperating": "Net Cash from Operating Activities",
    "fr.netCashFromInvesting": "Net Cash from Investing Activities",
    "fr.netCashFromFinancing": "Net Cash from Financing Activities",
    "fr.generateAndView": "Generate and view your company's financial statements",
    "fr.assetsEquals": "Assets = Liabilities + Equity as of a specific date",
    "fr.cashFlowDescription": "Cash inflows and outflows categorized by activity type",
    "fr.asOfDateRequired": "As of date is required",
    "fr.startDateRequired": "Start date is required",
    "fr.endDateRequired": "End date is required",
    "fr.cashAtBeginning": "Cash at Beginning of Period",
    "fr.cashAtEnd": "Cash at End of Period",
    "fr.netIncreaseDecrease": "Net Increase (Decrease) in Cash",
    "fr.totalLiabilitiesAndEquity": "Total Liabilities and Equity",
    
    // Account Reports
    "ar.title": "Account Reports",
    "ar.manage": "View detailed account reports",
    "ar.selectAccount": "Select Account",
    "ar.transactions": "Transactions",
    "ar.balance": "Balance",
    "ar.openingBalance": "Opening Balance",
    "ar.closingBalance": "Closing Balance",
    "ar.noTransactions": "No transactions found",
    "ar.loading": "Loading account report...",
    
    // Projects
    "project.title": "Projects",
    "project.manage": "Manage projects",
    "project.new": "New Project",
    "project.create": "Create Project",
    "project.edit": "Edit Project",
    "project.delete": "Delete Project",
    "project.deleteConfirm": "Are you sure you want to delete this project?",
    "project.name": "Project Name",
    "project.description": "Description",
    "project.active": "Active",
    "project.inactive": "Inactive",
    "project.noProjects": "No projects found",
    "project.loading": "Loading projects...",
    "project.manageProjects": "Manage projects",
    "project.createNew": "Create a new project",
    "project.updateProject": "Update project information",
    "project.deleteConfirmFull": "Are you sure you want to delete this project? This will remove it from all journal entry lines.",
    "project.nameRequired": "Project name is required",
    "project.createdSuccess": "Project created successfully",
    "project.updatedSuccess": "Project updated successfully",
    "project.deletedSuccess": "Project deleted successfully",
    "project.saveError": "Failed to save project",
    "project.deleteError": "Failed to delete project",
    "project.assignToLines": "Manage projects that can be assigned to journal entry lines",
    "project.listOfActive": "List of all active projects",
    "project.clickToCreate": "No projects found. Click \"Add Project\" to create one.",
    "project.enterDetails": "Enter the project details below.",
    "project.placeholder": "e.g., Project 1",
    "project.accessDenied": "Access Denied",
    "project.onlyAdmin": "Only administrators can manage projects.",
    
    // Users
    "user.title": "User Management",
    "user.manage": "Manage system users",
    "user.new": "New User",
    "user.create": "Create User",
    "user.edit": "Edit User",
    "user.delete": "Delete User",
    "user.deleteConfirm": "Are you sure you want to delete this user?",
    "user.name": "Name",
    "user.email": "Email",
    "user.pin": "PIN",
    "user.role": "Role",
    "user.admin": "Admin",
    "user.accountant": "Accountant",
    "user.regular": "User",
    "user.noUsers": "No users found",
    "user.loading": "Loading users...",
    "user.manageSystemUsers": "Manage system users",
    "user.createNew": "Create a new user",
    "user.updateUser": "Update user information",
    "user.deleteConfirmFull": "Are you sure you want to delete this user? This action cannot be undone.",
    "user.nameRequired": "Name is required",
    "user.emailRequired": "Email is required",
    "user.pinRequired": "PIN is required and must be at least 4 characters",
    "user.createdSuccess": "User created successfully",
    "user.updatedSuccess": "User updated successfully",
    "user.deletedSuccess": "User deleted successfully",
    "user.saveError": "Failed to save user",
    "user.deleteError": "Failed to delete user",
    "user.loadError": "Failed to load users",
    "user.managePermissions": "Manage system users and their permissions",
    "user.updatePermissions": "Update user information and permissions",
    "user.createAccount": "Create a new user account",
    "user.userName": "User name",
    "user.enterPin": "Enter PIN (4-10 digits)",
    "user.pinMinLength": "PIN must be at least 4 characters long",
    "user.leaveBlank": "(leave blank to keep current)",
    "user.adminFullAccess": "Admin (Full Access)",
    "user.accountantViewEdit": "Accountant (View & Edit)",
    "user.userViewOnly": "User (View Only)",
    "user.canViewEditEverything": "Can view and edit everything",
    "user.canViewEditAccounting": "Can view and edit accounting data",
    "user.canOnlyView": "Can only view data, cannot edit",
    
    // Login
    "login.title": "Login",
    "login.email": "Email",
    "login.pin": "PIN",
    "login.submit": "Login",
    "login.invalid": "Invalid email or PIN",
    "login.error": "Login failed",
    "login.enterEmail": "Enter your email",
    "login.enterPin": "Enter your PIN",
  },
  ar: {
    // Navigation
    "nav.dashboard": "لوحة التحكم",
    "nav.chartOfAccounts": "دليل الحسابات",
    "nav.journalEntries": "قيود اليومية",
    "nav.projects": "المشاريع",
    "nav.purchaseOrders": "أوامر الشراء",
    "nav.generalLedger": "دفتر الأستاذ العام",
    "nav.trialBalance": "ميزان المراجعة",
    "nav.financialReports": "التقارير المالية",
    "nav.accountReports": "تقارير الحسابات",
    "nav.users": "المستخدمون",
    "nav.logout": "تسجيل الخروج",
    
    // Common
    "common.save": "حفظ",
    "common.cancel": "إلغاء",
    "common.delete": "حذف",
    "common.edit": "تعديل",
    "common.view": "عرض",
    "common.create": "إنشاء",
    "common.update": "تحديث",
    "common.search": "بحث",
    "common.loading": "جاري التحميل...",
    "common.close": "إغلاق",
    "common.submit": "إرسال",
    "common.actions": "الإجراءات",
    "common.status": "الحالة",
    "common.date": "التاريخ",
    "common.amount": "المبلغ",
    "common.description": "الوصف",
    "common.name": "الاسم",
    "common.email": "البريد الإلكتروني",
    "common.role": "الدور",
    "common.createdBy": "تم الإنشاء بواسطة",
    "common.createdAt": "تاريخ الإنشاء",
    
    // Purchase Orders
    "po.title": "أوامر الشراء",
    "po.manage": "إدارة أوامر الشراء والموافقات",
    "po.new": "أمر شراء جديد",
    "po.create": "إنشاء أمر شراء جديد",
    "po.edit": "تعديل أمر الشراء",
    "po.update": "تحديث أمر الشراء",
    "po.number": "رقم أمر الشراء",
    "po.amount": "المبلغ",
    "po.description": "الوصف",
    "po.uploadImage": "رفع صورة",
    "po.status": "الحالة",
    "po.pending": "قيد الانتظار",
    "po.firstApproved": "موافق عليه أولاً",
    "po.approved": "موافق عليه",
    "po.rejected": "مرفوض",
    "po.approve": "موافقة",
    "po.reject": "رفض",
    "po.rejectionReason": "سبب الرفض",
    "po.rejectTitle": "رفض أمر الشراء",
    "po.rejectDescription": "يرجى تقديم سبب لرفض أمر الشراء هذا.",
    "po.adminApprove": "موافقة المدير",
    "po.accountantApprove": "موافقة المحاسب",
    "po.firstApprovedBy": "موافق عليه أولاً بواسطة",
    "po.secondApprovedBy": "موافق عليه ثانياً بواسطة",
    "po.rejectedBy": "مرفوض بواسطة",
    "po.viewDetails": "عرض تفاصيل أمر الشراء",
    "po.allOrders": "جميع أوامر الشراء",
    "po.noOrders": "لم يتم العثور على أوامر شراء. انقر فوق \"أمر شراء جديد\" لإنشاء واحد.",
    
    // Journal Entries
    "je.title": "قيود اليومية",
    "je.create": "إنشاء قيد",
    "je.view": "عرض القيود",
    "je.createNew": "إنشاء قيد يومية",
    "je.edit": "تعديل قيد اليومية",
    "je.entryNumber": "رقم القيد",
    "je.accountName": "اسم الحساب",
    "je.project": "المشروع",
    "je.createdBy": "تم الإنشاء بواسطة",
    "je.lines": "البنود",
    "je.balanced": "متوازن",
    "je.notBalanced": "غير متوازن",
    
    // Chart of Accounts
    "coa.title": "دليل الحسابات",
    "coa.addAccount": "إضافة حساب",
    "coa.addSubAccount": "إضافة حساب فرعي",
    "coa.editAccount": "تعديل الحساب",
    "coa.accountCode": "رمز الحساب",
    "coa.accountName": "اسم الحساب",
    "coa.accountType": "نوع الحساب",
    "coa.parentAccount": "الحساب الرئيسي",
    "coa.cashFlowCategory": "فئة التدفق النقدي",
    "coa.accountTypes": "أنواع الحسابات",
    "coa.autoGenerated": "(يتم إنشاؤه تلقائياً)",
    "coa.selectType": "اختر النوع",
    "coa.selectParent": "اختر الحساب الرئيسي",
    "coa.isHeaderAccount": "حساب رأس",
    "coa.updateAccountInfo": "قم بتحديث معلومات الحساب أدناه.",
    "coa.createSubAccount": "إنشاء حساب فرعي جديد تحت الحساب الرئيسي المحدد.",
    "coa.createNewAccount": "إنشاء حساب جديد في دليل الحسابات الخاص بك.",
    "coa.accountCodesAuto": "يتم إنشاء رموز الحسابات تلقائياً بناءً على نوع الحساب والتسلسل الهرمي",
    "coa.placeholderCash": "مثال: النقد",
    "coa.noParent": "لا يوجد حساب رئيسي",
    "coa.operating": "تشغيل",
    "coa.investing": "استثمار",
    "coa.financing": "تمويل",
    "coa.none": "لا شيء",
    "coa.cannotDelete": "لا يمكن حذف الحساب",
    "coa.hasTransactions": "هذا الحساب يحتوي على معاملات ولا يمكن حذفه.",
    "coa.deleteConfirm": "هل أنت متأكد أنك تريد حذف هذا الحساب؟",
    "coa.invalidAccountType": "نوع حساب غير صحيح",
    "coa.selectAccountType": "يرجى اختيار نوع الحساب.",
    
    // General
    "general.success": "نجح",
    "general.error": "خطأ",
    "general.confirm": "هل أنت متأكد؟",
    "general.yes": "نعم",
    "general.no": "لا",
    "general.unknown": "غير معروف",
    "general.noDescription": "لا يوجد وصف",
    "general.select": "اختر",
    "general.none": "لا شيء",
    "general.all": "الكل",
    "general.filter": "تصفية",
    "general.clear": "مسح",
    "general.apply": "تطبيق",
    "general.reset": "إعادة تعيين",
    "general.export": "تصدير",
    "general.print": "طباعة",
    "general.download": "تحميل",
    "general.upload": "رفع",
    "general.remove": "إزالة",
    "general.add": "إضافة",
    "general.back": "رجوع",
    "general.next": "التالي",
    "general.previous": "السابق",
    "general.finish": "إنهاء",
    "general.start": "بداية",
    "general.end": "نهاية",
    "general.from": "من",
    "general.to": "إلى",
    "general.asOf": "حتى",
    "general.total": "المجموع",
    "general.subtotal": "المجموع الفرعي",
    "general.balance": "الرصيد",
    "general.debit": "مدين",
    "general.credit": "دائن",
    "general.required": "مطلوب",
    "general.optional": "اختياري",
    
    // Dashboard
    "dashboard.title": "لوحة التحكم",
    "dashboard.overview": "نظرة عامة مالية",
    "dashboard.totalAssets": "إجمالي الأصول",
    "dashboard.totalLiabilities": "إجمالي الخصوم",
    "dashboard.totalEquity": "إجمالي حقوق الملكية",
    "dashboard.netIncome": "صافي الدخل",
    "dashboard.revenue": "الإيرادات",
    "dashboard.expenses": "المصروفات",
    "dashboard.accountBreakdown": "تفصيل الحسابات",
    "dashboard.byType": "حسب نوع الحساب",
    
    // Chart of Accounts
    "coa.manage": "إدارة دليل الحسابات",
    "coa.code": "الرمز",
    "coa.description": "الوصف",
    "coa.isHeader": "حساب رأس",
    "coa.parent": "الحساب الرئيسي",
    "coa.save": "حفظ الحساب",
    "coa.deleteConfirm": "هل أنت متأكد أنك تريد حذف هذا الحساب؟",
    "coa.noAccounts": "لم يتم العثور على حسابات",
    "coa.loading": "جاري تحميل الحسابات...",
    
    // Journal Entries
    "je.manage": "إدارة قيود اليومية",
    "je.date": "التاريخ",
    "je.reference": "المرجع",
    "je.debit": "مدين",
    "je.credit": "دائن",
    "je.addLine": "إضافة بند",
    "je.removeLine": "إزالة بند",
    "je.totalDebit": "إجمالي المدين",
    "je.totalCredit": "إجمالي الدائن",
    "je.difference": "الفرق",
    "je.balanced": "متوازن",
    "je.notBalanced": "غير متوازن",
    "je.save": "حفظ القيد",
    "je.cancel": "إلغاء",
    "je.delete": "حذف القيد",
    "je.deleteConfirm": "هل أنت متأكد أنك تريد حذف هذا القيد؟",
    "je.reverse": "عكس القيد",
    "je.reverseConfirm": "هل أنت متأكد أنك تريد عكس هذا القيد؟",
    "je.noEntries": "لم يتم العثور على قيود",
    "je.loading": "جاري تحميل القيود...",
    "je.showAll": "عرض الكل",
    "je.filterByDate": "تصفية حسب التاريخ",
    "je.selectAccount": "اختر الحساب",
    "je.selectProject": "اختر المشروع",
    "je.startDate": "تاريخ البداية",
    "je.endDate": "تاريخ النهاية",
    
    // General Ledger
    "gl.title": "دفتر الأستاذ العام",
    "gl.manage": "عرض سجل المعاملات التفصيلي للحسابات",
    "gl.selectAccount": "اختر الحساب",
    "gl.allAccounts": "جميع الحسابات",
    "gl.dateRange": "نطاق التاريخ",
    "gl.transactions": "المعاملات",
    "gl.noTransactions": "لم يتم العثور على معاملات",
    "gl.loading": "جاري تحميل دفتر الأستاذ...",
    "gl.viewTransactionHistory": "عرض سجل المعاملات التفصيلي للحسابات",
    "gl.noAccountSelected": "لم يتم اختيار حساب",
    "gl.selectAccountToView": "يرجى اختيار حساب لعرض دفتر الأستاذ الخاص به",
    "gl.loadLedger": "تحميل دفتر الأستاذ",
    "gl.searchTransactions": "بحث في المعاملات",
    "gl.entryDate": "تاريخ القيد",
    "gl.entryNumber": "رقم القيد",
    "gl.reference": "المرجع",
    "gl.debit": "مدين",
    "gl.credit": "دائن",
    "gl.runningBalance": "الرصيد الجاري",
    "gl.exportCSV": "تصدير CSV",
    
    // Trial Balance
    "tb.title": "ميزان المراجعة",
    "tb.manage": "عرض تقرير ميزان المراجعة",
    "tb.asOf": "حتى تاريخ",
    "tb.account": "الحساب",
    "tb.debitBalance": "رصيد مدين",
    "tb.creditBalance": "رصيد دائن",
    "tb.totalDebits": "إجمالي المدين",
    "tb.totalCredits": "إجمالي الدائن",
    "tb.difference": "الفرق",
    "tb.noData": "لا توجد بيانات",
    "tb.loading": "جاري تحميل ميزان المراجعة...",
    "tb.viewReport": "عرض تقرير ميزان المراجعة",
    "tb.flatView": "عرض مسطح",
    "tb.hierarchicalView": "عرض هرمي",
    "tb.expandAll": "توسيع الكل",
    "tb.collapseAll": "طي الكل",
    "tb.exportCSV": "تصدير CSV",
    "tb.loadBalance": "تحميل ميزان المراجعة",
    "tb.searchAccounts": "بحث في الحسابات...",
    "tb.allTypes": "جميع الأنواع",
    "tb.summary": "ملخص جميع أرصدة الحسابات للتحقق من مسك الدفاتر المزدوج",
    "tb.applyDateFilter": "تطبيق مرشح التاريخ",
    "tb.searchByNameOrCode": "البحث باسم الحساب أو الرمز",
    "tb.filterByType": "تصفية حسب نوع الحساب",
    "tb.allAccountTypes": "جميع أنواع الحسابات",
    "tb.showingAccounts": "عرض {{count}} من {{total}} حسابات",
    "tb.type": "النوع",
    "tb.search": "بحث",
    "tb.debits": "مدين",
    "tb.credits": "دائن",
    "tb.totalWithChildren": "الإجمالي (مع الحسابات الفرعية)",
    "tb.flatList": "قائمة مسطحة",
    
    // Financial Reports
    "fr.title": "التقارير المالية",
    "fr.manage": "إنشاء القوائم المالية",
    "fr.balanceSheet": "الميزانية العمومية",
    "fr.incomeStatement": "قائمة الدخل",
    "fr.cashFlow": "قائمة التدفقات النقدية",
    "fr.generate": "إنشاء التقرير",
    "fr.asOf": "حتى تاريخ",
    "fr.period": "الفترة",
    "fr.assets": "الأصول",
    "fr.liabilities": "الخصوم",
    "fr.equity": "حقوق الملكية",
    "fr.revenue": "الإيرادات",
    "fr.expenses": "المصروفات",
    "fr.grossProfit": "إجمالي الربح",
    "fr.netProfit": "صافي الربح",
    "fr.netIncome": "صافي الدخل",
    "fr.operatingActivities": "الأنشطة التشغيلية",
    "fr.investingActivities": "الأنشطة الاستثمارية",
    "fr.financingActivities": "الأنشطة التمويلية",
    "fr.netCashFlow": "صافي التدفق النقدي",
    "fr.loading": "جاري تحميل التقرير...",
    "fr.noData": "لا توجد بيانات",
    "fr.generateStatements": "إنشاء القوائم المالية",
    "fr.selectReport": "اختر نوع التقرير",
    "fr.asOfDateRequired": "تاريخ الحساب مطلوب",
    "fr.loadingReport": "جاري تحميل التقرير...",
    "fr.exportCSV": "تصدير CSV",
    "fr.print": "طباعة",
    "fr.totalAssets": "إجمالي الأصول",
    "fr.totalLiabilities": "إجمالي الخصوم",
    "fr.totalEquity": "إجمالي حقوق الملكية",
    "fr.totalRevenue": "إجمالي الإيرادات",
    "fr.totalExpenses": "إجمالي المصروفات",
    "fr.netCashFromOperating": "صافي النقد من الأنشطة التشغيلية",
    "fr.netCashFromInvesting": "صافي النقد من الأنشطة الاستثمارية",
    "fr.netCashFromFinancing": "صافي النقد من الأنشطة التمويلية",
    "fr.generateAndView": "إنشاء وعرض القوائم المالية لشركتك",
    "fr.assetsEquals": "الأصول = الخصوم + حقوق الملكية اعتبارًا من تاريخ محدد",
    "fr.cashFlowDescription": "التدفقات النقدية الداخلة والخارجة مصنفة حسب نوع النشاط",
    "fr.asOfDateRequired": "تاريخ الحساب مطلوب",
    "fr.startDateRequired": "تاريخ البداية مطلوب",
    "fr.endDateRequired": "تاريخ النهاية مطلوب",
    "fr.cashAtBeginning": "النقد في بداية الفترة",
    "fr.cashAtEnd": "النقد في نهاية الفترة",
    "fr.netIncreaseDecrease": "صافي الزيادة (النقصان) في النقد",
    "fr.totalLiabilitiesAndEquity": "إجمالي الخصوم وحقوق الملكية",
    
    // Account Reports
    "ar.title": "تقارير الحسابات",
    "ar.manage": "عرض تقارير الحسابات التفصيلية",
    "ar.selectAccount": "اختر الحساب",
    "ar.transactions": "المعاملات",
    "ar.balance": "الرصيد",
    "ar.openingBalance": "الرصيد الافتتاحي",
    "ar.closingBalance": "الرصيد الختامي",
    "ar.noTransactions": "لم يتم العثور على معاملات",
    "ar.loading": "جاري تحميل تقرير الحساب...",
    
    // Projects
    "project.title": "المشاريع",
    "project.manage": "إدارة المشاريع",
    "project.new": "مشروع جديد",
    "project.create": "إنشاء مشروع",
    "project.edit": "تعديل المشروع",
    "project.delete": "حذف المشروع",
    "project.deleteConfirm": "هل أنت متأكد أنك تريد حذف هذا المشروع؟",
    "project.name": "اسم المشروع",
    "project.description": "الوصف",
    "project.active": "نشط",
    "project.inactive": "غير نشط",
    "project.noProjects": "لم يتم العثور على مشاريع",
    "project.loading": "جاري تحميل المشاريع...",
    "project.manageProjects": "إدارة المشاريع",
    "project.createNew": "إنشاء مشروع جديد",
    "project.updateProject": "تحديث معلومات المشروع",
    "project.deleteConfirmFull": "هل أنت متأكد أنك تريد حذف هذا المشروع؟ سيتم إزالته من جميع بنود قيود اليومية.",
    "project.nameRequired": "اسم المشروع مطلوب",
    "project.createdSuccess": "تم إنشاء المشروع بنجاح",
    "project.updatedSuccess": "تم تحديث المشروع بنجاح",
    "project.deletedSuccess": "تم حذف المشروع بنجاح",
    "project.saveError": "فشل في حفظ المشروع",
    "project.deleteError": "فشل في حذف المشروع",
    "project.assignToLines": "إدارة المشاريع التي يمكن تعيينها لبنود قيود اليومية",
    "project.listOfActive": "قائمة بجميع المشاريع النشطة",
    "project.clickToCreate": "لم يتم العثور على مشاريع. انقر فوق \"إضافة مشروع\" لإنشاء واحد.",
    "project.enterDetails": "أدخل تفاصيل المشروع أدناه.",
    "project.placeholder": "مثال: المشروع 1",
    "project.accessDenied": "تم رفض الوصول",
    "project.onlyAdmin": "يمكن للمسؤولين فقط إدارة المشاريع.",
    
    // Users
    "user.title": "إدارة المستخدمين",
    "user.manage": "إدارة مستخدمي النظام",
    "user.new": "مستخدم جديد",
    "user.create": "إنشاء مستخدم",
    "user.edit": "تعديل المستخدم",
    "user.delete": "حذف المستخدم",
    "user.deleteConfirm": "هل أنت متأكد أنك تريد حذف هذا المستخدم؟",
    "user.name": "الاسم",
    "user.email": "البريد الإلكتروني",
    "user.pin": "الرمز السري",
    "user.role": "الدور",
    "user.admin": "مدير",
    "user.accountant": "محاسب",
    "user.regular": "مستخدم",
    "user.noUsers": "لم يتم العثور على مستخدمين",
    "user.loading": "جاري تحميل المستخدمين...",
    "user.manageSystemUsers": "إدارة مستخدمي النظام",
    "user.createNew": "إنشاء مستخدم جديد",
    "user.updateUser": "تحديث معلومات المستخدم",
    "user.deleteConfirmFull": "هل أنت متأكد أنك تريد حذف هذا المستخدم؟ لا يمكن التراجع عن هذا الإجراء.",
    "user.nameRequired": "الاسم مطلوب",
    "user.emailRequired": "البريد الإلكتروني مطلوب",
    "user.pinRequired": "الرمز السري مطلوب ويجب أن يكون 4 أحرف على الأقل",
    "user.createdSuccess": "تم إنشاء المستخدم بنجاح",
    "user.updatedSuccess": "تم تحديث المستخدم بنجاح",
    "user.deletedSuccess": "تم حذف المستخدم بنجاح",
    "user.saveError": "فشل في حفظ المستخدم",
    "user.deleteError": "فشل في حذف المستخدم",
    "user.loadError": "فشل في تحميل المستخدمين",
    
    // Login
    "login.title": "تسجيل الدخول",
    "login.email": "البريد الإلكتروني",
    "login.pin": "الرمز السري",
    "login.submit": "تسجيل الدخول",
    "login.invalid": "البريد الإلكتروني أو الرمز السري غير صحيح",
    "login.error": "فشل تسجيل الدخول",
    "login.enterEmail": "أدخل بريدك الإلكتروني",
    "login.enterPin": "أدخل الرمز السري",
  },
}

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguageState] = useState<Language>("en")

  useEffect(() => {
    // Load language from localStorage
    const savedLanguage = localStorage.getItem("language") as Language
    if (savedLanguage && (savedLanguage === "en" || savedLanguage === "ar")) {
      setLanguageState(savedLanguage)
    }
  }, [])

  const setLanguage = (lang: Language) => {
    setLanguageState(lang)
    localStorage.setItem("language", lang)
    // Update document direction for RTL
    document.documentElement.dir = lang === "ar" ? "rtl" : "ltr"
    document.documentElement.lang = lang
  }

  useEffect(() => {
    // Set initial direction
    document.documentElement.dir = language === "ar" ? "rtl" : "ltr"
    document.documentElement.lang = language
  }, [language])

  const t = (key: string): string => {
    return translations[language][key] || key
  }

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  )
}

export function useLanguage() {
  const context = useContext(LanguageContext)
  if (!context) {
    throw new Error("useLanguage must be used within LanguageProvider")
  }
  return context
}

